<HTML>
<HEAD><META name="HTML-Generator" content="Dymola"><TITLE>MultiBody</TITLE></HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE MultiBody<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="MultiBody"></A>MultiBody</H2>
<B>Library to model the movement of 3-dimensional mechanical systems</B>
<P>
<A HREF="MultiBody_UsersGuide.html#MultiBody.UsersGuide"
><IMG SRC="MultiBody.UsersGuideI.png" ALT="MultiBody.UsersGuide" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody.html#MultiBody.World"
><IMG SRC="MultiBody.WorldI.png" ALT="MultiBody.World" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Examples.html#MultiBody.Examples"
><IMG SRC="MultiBody.ExamplesI.png" ALT="MultiBody.Examples" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Forces.html#MultiBody.Forces"
><IMG SRC="MultiBody.ForcesI.png" ALT="MultiBody.Forces" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Frames.html#MultiBody.Frames"
><IMG SRC="MultiBody.FramesI.png" ALT="MultiBody.Frames" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Joints.html#MultiBody.Joints"
><IMG SRC="MultiBody.JointsI.png" ALT="MultiBody.Joints" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Parts.html#MultiBody.Parts"
><IMG SRC="MultiBody.PartsI.png" ALT="MultiBody.Parts" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Sensors.html#MultiBody.Sensors"
><IMG SRC="MultiBody.SensorsI.png" ALT="MultiBody.Sensors" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Types.html#MultiBody.Types"
><IMG SRC="MultiBody.TypesI.png" ALT="MultiBody.Types" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Visualizers.html#MultiBody.Visualizers"
><IMG SRC="MultiBody.VisualizersI.png" ALT="MultiBody.Visualizers" WIDTH=80  HEIGHT=80 ></A>
<P><P>
<H3>Information</H3>
<PRE></pre>
<p>
Library <b>MultiBody</b> is a <b>free</b> Modelica package providing
3-dimensional mechanical components to model in a convenient way
<b>mechanical systems</b>, such as robots, mechanisms, vehicles.
Typical animations generated with this library are shown
in the next figure:
</p>

<p>
<img src="../Images/MultiBody.png">
</p>

<p>
For an introduction, have especially a look at:
</p>

<ul>
<li> <A HREF="MultiBody_UsersGuide.html#MultiBody.UsersGuide"
>MultiBody.UsersGuide</a>
     discusses the most important aspects how to use this library.</li>
<li> <A HREF="MultiBody_Examples.html#MultiBody.Examples"
>MultiBody.Examples</a>
     contains examples that demonstrate the usage of this library.</li>
</ul>

<p>
The MultiBody library will be included as
Modelica.Mechanics.MultiBody in the next version of the
Modelica standard library.
Note, that the MultiBody library replaces the long used
ModelicaAdditions.MultiBody library. In
<A HREF="MultiBody_UsersGuide.html#MultiBody.UsersGuide.Upgrade"
>MultiBody.UsersGuide.Upgrade</a>
it is described how to upgrade.
</p>

<p><b>Copyright &copy; 2003, Modelica Association and DLR.</b></p>
<p><i>
This Modelica package is <b>free</b> software; it can be redistributed and/or modified
under the terms of the <b>Modelica license</b>, see the license conditions
and the accompanying <b>disclaimer</b> in the documentation of package
Modelica in file "Modelica/package.mo".
</i></p>
<pre></PRE><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="MultiBody_UsersGuide.html#MultiBody.UsersGuide"
>UsersGuide</A>
</TD><TD>User's Guide</TD></TR>
<TR><TD><A HREF="MultiBody.html#MultiBody.World"
>World</A>
</TD><TD>World coordinate system + gravity field + default animation definition</TD></TR>
<TR><TD><A HREF="MultiBody_Examples.html#MultiBody.Examples"
>Examples</A>
</TD><TD>Examples for the 3D mechanical systems library</TD></TR>
<TR><TD><A HREF="MultiBody_Forces.html#MultiBody.Forces"
>Forces</A>
</TD><TD>Components that exert forces and/or torques between frames</TD></TR>
<TR><TD><A HREF="MultiBody_Frames.html#MultiBody.Frames"
>Frames</A>
</TD><TD>Functions to transform rotational frame quantities</TD></TR>
<TR><TD><A HREF="MultiBody_Interfaces.html#MultiBody.Interfaces"
>Interfaces</A>
</TD><TD>Connectors and partial models for 3D mechanical components</TD></TR>
<TR><TD><A HREF="MultiBody_Joints.html#MultiBody.Joints"
>Joints</A>
</TD><TD>Components that constrain the motion between two frames</TD></TR>
<TR><TD><A HREF="MultiBody_Parts.html#MultiBody.Parts"
>Parts</A>
</TD><TD>Rigid components such as bodies with mass and inertia and massless rods</TD></TR>
<TR><TD><A HREF="MultiBody_Sensors.html#MultiBody.Sensors"
>Sensors</A>
</TD><TD>Sensors to measure variables</TD></TR>
<TR><TD><A HREF="MultiBody_Types.html#MultiBody.Types"
>Types</A>
</TD><TD>Constants and types with choices, especially to build menus</TD></TR>
<TR><TD><A HREF="MultiBody_Visualizers.html#MultiBody.Visualizers"
>Visualizers</A>
</TD><TD>3-dimensional visual objects</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE World<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="MultiBody.WorldI.png" ALT="MultiBody.World" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="MultiBody.World"></A><A HREF="MultiBody.html#MultiBody"
>MultiBody</A>.World</H2>
<B>World coordinate system + gravity field + default animation definition</B><p>
<IMG SRC="MultiBody.WorldD.png" ALT="MultiBody.World">
<H3>Information</H3>
<PRE></pre>
<p>
Model <b>World</b> represents a global coordinate system fixed in
ground. This model serves several purposes:
<ul>
<li> It is used as <b>inertial system</b> in which
     the equations of all elements of the MultiBody library
     are defined.</li>
<li> It is the world frame of an <b>animation window</b> in which
     all elements of the MultiBody library are visualized.</li>
<li> It is used to define the <b>gravity field</b> in which a
     multi-body model is present. Default is a uniform gravity
     field where the gravity acceleration vector g is the
     same at every position. Additionally, a point gravity field
     can be selected.</li>
<li> It is used to define <b>default settings</b> of animation properties
     (e.g. the diameter of a sphere representing by default
     the center of mass of a body, or the diameters of the cylinders
     representing a revolute joint).</li>
<li> It is used to define a <b>visual representation</b> of the
     world model (= 3 coordinate axes with labels) and of the defined
     gravity field.<br>
    <IMG SRC="../Images/world.png" ALT="MultiBodys.World">
</li>
</ul>
<p>
Since the gravity field function is required from all bodies with mass
and the default settings of animation properties are required
from nearly every component, exactly one instance of model World needs
to be present in every model on the top level. The basic declaration
needs to be:
</p>
<pre>
    <b>inner</b> MultiBody.World world
</pre>
<p>
Note, it must be an <b>inner</b> declaration with instance name <b>world</b>
in order that this world object can be accessed from all objects in the
model. When dragging the "World" object from the package browser into
the diagram layer, this declaration is automatically generated
(this is defined via annotations in model World).
</p>
<p>
All vectors and tensors of a mechanical system are resolved in a
frame that is local to the corresponding component. Usually,
if all relative joint coordinates vanish, the local frames
of all components are parallel to each other, as well as to the
world frame (this holds as long as a Parts.FixedRotation,
component is <b>not</b> used). In this "reference configuration"
it is therefore
alternatively possible to resolve all vectors in the world
frame, since all frames are parallel to each other.
This is often very convenient. In order to give some visual
support in such a situation, in the icon of a World instance
two axes of the world frame are shown and the labels
of these axes can be set via parameters.
</p>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>enableAnimation</TD><TD>true</TD><TD>= true, if animation of all components is enabled</TD></TR>
<TR><TD>animateWorld</TD><TD>true</TD><TD>= true, if world coordinate system shall be visualized</TD></TR>
<TR><TD>animateGravity</TD><TD>true</TD><TD>= true, if gravity field shall be visualized (acceleration vector or field center)</TD></TR>
<TR><TD>label1</TD><TD>&quot;x&quot;</TD><TD>Label of horizontal axis in icon</TD></TR>
<TR><TD>label2</TD><TD>&quot;y&quot;</TD><TD>Label of vertical axis in icon</TD></TR>
<TR><TD>gravityType</TD><TD>MultiBody.Types.GravityTypes.UniformGravity</TD><TD>Type of gravity field</TD></TR>
<TR><TD>g</TD><TD>9.81</TD><TD> Constant gravity acceleration [m/s2]</TD></TR>
<TR><TD>n</TD><TD>{0,-1,0}</TD><TD> Direction of gravity resolved in world frame (gravity = g*n/length(n))</TD></TR>
<TR><TD>mue</TD><TD>3.986e14</TD><TD> Gravity field constant (default = field constant of earth) [m3/s2]</TD></TR>
<TR><TD>axisLength</TD><TD>nominalLength/2</TD><TD> Length of world axes arrows [m]</TD></TR>
<TR><TD>axisDiameter</TD><TD>axisLength/defaultFrameDiameterFraction</TD><TD> Diameter of world axes arrows [m]</TD></TR>
<TR><TD>axisShowLabels</TD><TD>true</TD><TD> = true, if labels shall be shown</TD></TR>
<TR><TD>axisColor_x</TD><TD>MultiBody.Types.Defaults.FrameColor</TD><TD> Color of x-arrow</TD></TR>
<TR><TD>axisColor_y</TD><TD>axisColor_x</TD><TD> Color of y-arrow</TD></TR>
<TR><TD>axisColor_z</TD><TD>axisColor_x</TD><TD> Color of z-arrow</TD></TR>
<TR><TD>gravityArrowTail[3]</TD><TD>{0,0,0}</TD><TD> Position vector from origin of world frame to arrow tail, resolved in world frame [m]</TD></TR>
<TR><TD>gravityArrowLength</TD><TD>axisLength/2</TD><TD> Length of gravity arrow [m]</TD></TR>
<TR><TD>gravityArrowDiameter</TD><TD>gravityArrowLength/defaultWidthFraction</TD><TD> Diameter of gravity arrow [m]</TD></TR>
<TR><TD>gravityArrowColor</TD><TD>{0,230,0}</TD><TD> Color of gravity arrow</TD></TR>
<TR><TD>gravitySphereDiameter</TD><TD>12742000</TD><TD> Diameter of sphere representing gravity center (default = mean diameter of earth) [m]</TD></TR>
<TR><TD>gravitySphereColor</TD><TD>{0,230,0}</TD><TD> Color of gravity sphere</TD></TR>
<TR><TD>nominalLength</TD><TD>1</TD><TD> &quot;Nominal&quot; length of multi-body system [m]</TD></TR>
<TR><TD>defaultAxisLength</TD><TD>nominalLength/5</TD><TD> Default for length of a frame axis (but not world frame) [m]</TD></TR>
<TR><TD>defaultJointLength</TD><TD>nominalLength/10</TD><TD> Default for the fixed length of a shape representing a joint [m]</TD></TR>
<TR><TD>defaultJointWidth</TD><TD>nominalLength/20</TD><TD> Default for the fixed width of a shape representing a joint [m]</TD></TR>
<TR><TD>defaultForceLength</TD><TD>nominalLength/10</TD><TD> Default for the fixed length of a shape representing a force (e.g. damper) [m]</TD></TR>
<TR><TD>defaultForceWidth</TD><TD>nominalLength/20</TD><TD> Default for the fixed width of a shape represening a force (e.g. spring, bushing) [m]</TD></TR>
<TR><TD>defaultBodyDiameter</TD><TD>nominalLength/9</TD><TD> Default for diameter of sphere representing the center of mass of a body [m]</TD></TR>
<TR><TD>defaultWidthFraction</TD><TD>20</TD><TD> Default for shape width as a fraction of shape length (e.g., for Parts.FixedTranslation)</TD></TR>
<TR><TD>defaultArrowDiameter</TD><TD>nominalLength/40</TD><TD> Default for arrow diameter (e.g., of forces, torques, sensors) [m]</TD></TR>
<TR><TD>defaultFrameDiameterFraction</TD><TD>40</TD><TD> Default for arrow diameter of a coordinate system as a fraction of axis length</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> World <font color="darkgreen">
  &quot;World coordinate system + gravity field + default animation definition&quot;</font>

  <font color="darkgreen"></font>
  <font color="blue">import </font>SI = <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="darkgreen"></font>
  <font color="darkgreen"></font>
  <font color="blue">parameter </font>Boolean enableAnimation=true <font color="darkgreen">
    &quot;= true, if animation of all components is enabled&quot;</font>;
  <font color="blue">parameter </font>Boolean animateWorld=true <font color="darkgreen">
    &quot;= true, if world coordinate system shall be visualized&quot;</font>;
  <font color="blue">parameter </font>Boolean animateGravity=true <font color="darkgreen">
    &quot;= true, if gravity field shall be visualized (acceleration vector or field center)&quot;</font>;
  <font color="blue">parameter </font><A HREF="MultiBody_Types.html#MultiBody.Types.AxisLabel"
>MultiBody.Types.AxisLabel</A> label1=&quot;x&quot; <font color="darkgreen">&quot;Label of horizontal axis in icon&quot;</font>;
  <font color="blue">parameter </font><A HREF="MultiBody_Types.html#MultiBody.Types.AxisLabel"
>MultiBody.Types.AxisLabel</A> label2=&quot;y&quot; <font color="darkgreen">&quot;Label of vertical axis in icon&quot;</font>;
  <font color="blue">parameter </font><A HREF="MultiBody_Types_GravityTypes.html#MultiBody.Types.GravityTypes.Temp"
>MultiBody.Types.GravityTypes.Temp</A> gravityType=MultiBody.Types.GravityTypes
      .UniformGravity <font color="darkgreen">&quot;Type of gravity field&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> g=9.81 <font color="darkgreen">
    &quot;|gravityType = UniformGravity| Constant gravity acceleration&quot;</font>;
  <font color="blue">parameter </font><A HREF="MultiBody_Types.html#MultiBody.Types.Axis"
>MultiBody.Types.Axis</A> n={0,-1,0} <font color="darkgreen">
    &quot;|gravityType = UniformGravity| Direction of gravity resolved in world frame (gravity = g*n/length(n))&quot;</font>;
  <font color="blue">parameter </font>Real mue(
    unit=&quot;m3/s2&quot;,
    min=0) = 3.986e14 <font color="darkgreen">
    &quot;|gravityType = PointGravity| Gravity field constant (default = field constant of earth)&quot;</font>;
  <font color="darkgreen"></font>
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Distance"
>SI.Distance</A> axisLength=nominalLength/2 <font color="darkgreen">
    &quot;|Animation|if animateWorld = true| Length of world axes arrows&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Distance"
>SI.Distance</A> axisDiameter=axisLength/defaultFrameDiameterFraction <font color="darkgreen">
    &quot;|Animation|if animateWorld = true| Diameter of world axes arrows&quot;</font>;
  <font color="blue">parameter </font>Boolean axisShowLabels=true <font color="darkgreen">
    &quot;|Animation|if animateWorld = true| = true, if labels shall be shown&quot;</font>;
  <font color="blue">parameter </font><A HREF="MultiBody_Types.html#MultiBody.Types.Color"
>MultiBody.Types.Color</A> axisColor_x=MultiBody.Types.Defaults.FrameColor <font color="darkgreen">
    &quot;|Animation|if animateWorld = true| Color of x-arrow&quot;</font>;
  <font color="blue">parameter </font><A HREF="MultiBody_Types.html#MultiBody.Types.Color"
>MultiBody.Types.Color</A> axisColor_y=axisColor_x <font color="darkgreen">
    &quot;|Animation|if animateWorld = true| Color of y-arrow&quot;</font>;
  <font color="blue">parameter </font><A HREF="MultiBody_Types.html#MultiBody.Types.Color"
>MultiBody.Types.Color</A> axisColor_z=axisColor_x <font color="darkgreen">
    &quot;|Animation|if animateWorld = true| Color of z-arrow&quot;</font>;
  <font color="darkgreen"></font>
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> gravityArrowTail[3]={0,0,0} <font color="darkgreen">
    &quot;|Animation|if animateGravity = true and gravityType = UniformGravity| Position vector from origin of world frame to arrow tail, resolved in world frame&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> gravityArrowLength=axisLength/2 <font color="darkgreen">
    &quot;|Animation|if animateGravity = true and gravityType = UniformGravity| Length of gravity arrow&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> gravityArrowDiameter=gravityArrowLength/defaultWidthFraction <font color="darkgreen">
    &quot;|Animation|if animateGravity = true and gravityType = UniformGravity| Diameter of gravity arrow&quot;</font>;
  <font color="blue">parameter </font><A HREF="MultiBody_Types.html#MultiBody.Types.Color"
>MultiBody.Types.Color</A> gravityArrowColor={0,230,0} <font color="darkgreen">
    &quot;|Animation|if animateGravity = true and gravityType = UniformGravity| Color of gravity arrow&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> gravitySphereDiameter=12742000 <font color="darkgreen">
    &quot;|Animation|if animateGravity = true and gravityType = PointGravity| Diameter of sphere representing gravity center (default = mean diameter of earth)&quot;</font>;
  <font color="blue">parameter </font><A HREF="MultiBody_Types.html#MultiBody.Types.Color"
>MultiBody.Types.Color</A> gravitySphereColor={0,230,0} <font color="darkgreen">
    &quot;|Animation|if animateGravity = true and gravityType = PointGravity| Color of gravity sphere&quot;</font>;
  <font color="darkgreen"></font>
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> nominalLength=1 <font color="darkgreen">
    &quot;|Defaults|| \&quot;Nominal\&quot; length of multi-body system&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultAxisLength=nominalLength/5 <font color="darkgreen">
    &quot;|Defaults|| Default for length of a frame axis (but not world frame)&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultJointLength=nominalLength/10 <font color="darkgreen">
    &quot;|Defaults|| Default for the fixed length of a shape representing a joint&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultJointWidth=nominalLength/20 <font color="darkgreen">
    &quot;|Defaults|| Default for the fixed width of a shape representing a joint&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultForceLength=nominalLength/10 <font color="darkgreen">
    &quot;|Defaults|| Default for the fixed length of a shape representing a force (e.g. damper)&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultForceWidth=nominalLength/20 <font color="darkgreen">
    &quot;|Defaults|| Default for the fixed width of a shape represening a force (e.g. spring, bushing)&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultBodyDiameter=nominalLength/9 <font color="darkgreen">
    &quot;|Defaults|| Default for diameter of sphere representing the center of mass of a body&quot;</font>;
  <font color="blue">parameter </font>Real defaultWidthFraction=20 <font color="darkgreen">
    &quot;|Defaults|| Default for shape width as a fraction of shape length (e.g., for Parts.FixedTranslation)&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultArrowDiameter=nominalLength/40 <font color="darkgreen">
    &quot;|Defaults|| Default for arrow diameter (e.g., of forces, torques, sensors)&quot;</font>;
  <font color="blue">parameter </font>Real defaultFrameDiameterFraction=40 <font color="darkgreen">
    &quot;|Defaults|| Default for arrow diameter of a coordinate system as a fraction of axis length&quot;</font>;
  <font color="darkgreen"></font>
  <A HREF="MultiBody_Interfaces.html#MultiBody.Interfaces.Frame_b"
>MultiBody.Interfaces.Frame_b</A> frame_b;
  <font color="darkgreen"></font>
  <font color="darkgreen">/* The World object can only use the MultiBody.Visualizers.Advanced.Shape model, but no
     other models in package MultiBody.Visualizers, since the other models access
     data of the &quot;outer MultiBody.World world&quot; object, i.e., there are
     mutually dependent classes. For this reason, the higher level visualization
     objects cannot be used.
  */</font>
<font color="blue">protected </font>
  <font color="blue">parameter </font>Integer ndim=<font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld<font color="blue"> then </font>1<font color="blue"> else </font>0;
  <font color="blue">parameter </font>Integer ndim2=<font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld<font color="blue"> and </font>
      axisShowLabels<font color="blue"> then </font>1<font color="blue"> else </font>0;
  <font color="darkgreen"></font>
  <font color="darkgreen">// Parameters to define axes</font>
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> headLength=<font color="red">min</font>(axisLength, axisDiameter*Types.Defaults.
      FrameHeadLengthFraction);
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> headWidth=axisDiameter*Types.Defaults.FrameHeadWidthFraction;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> lineLength=<font color="red">max</font>(0, axisLength - headLength);
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> lineWidth=axisDiameter;
  <font color="darkgreen"></font>
  <font color="darkgreen">// Parameters to define axes labels</font>
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> scaledLabel=Types.Defaults.FrameLabelHeightFraction*axisDiameter;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> labelStart=1.05*axisLength;
  <font color="darkgreen"></font>
  <font color="darkgreen">// x-axis</font>
  <A HREF="MultiBody_Visualizers_Advanced.html#MultiBody.Visualizers.Advanced.Shape"
>MultiBody.Visualizers.Advanced.Shape</A> x_arrowLine[ndim](
    <font color="blue">each </font>shapeType=&quot;cylinder&quot;,
    <font color="blue">each </font>length=lineLength,
    <font color="blue">each </font>width=lineWidth,
    <font color="blue">each </font>height=lineWidth,
    <font color="blue">each </font>lengthDirection={1,0,0},
    <font color="blue">each </font>widthDirection={0,1,0},
    <font color="blue">each </font>color=axisColor_x,
    <font color="blue">each </font>specularCoefficient=0);
  <A HREF="MultiBody_Visualizers_Advanced.html#MultiBody.Visualizers.Advanced.Shape"
>MultiBody.Visualizers.Advanced.Shape</A> x_arrowHead[ndim](
    <font color="blue">each </font>shapeType=&quot;cone&quot;,
    <font color="blue">each </font>length=headLength,
    <font color="blue">each </font>width=headWidth,
    <font color="blue">each </font>height=headWidth,
    <font color="blue">each </font>lengthDirection={1,0,0},
    <font color="blue">each </font>widthDirection={0,1,0},
    <font color="blue">each </font>color=axisColor_x,
    <font color="blue">each </font>r={lineLength,0,0},
    <font color="blue">each </font>specularCoefficient=0);
  <A HREF="MultiBody_Visualizers_Internal.html#MultiBody.Visualizers.Internal.Lines"
>MultiBody.Visualizers.Internal.Lines</A> x_label[ndim2](
    <font color="blue">each </font>lines=scaledLabel*{[0, 0; 1, 1],[0, 1; 1, 0]},
    <font color="blue">each </font>diameter=axisDiameter,
    <font color="blue">each </font>color=axisColor_x,
    <font color="blue">each </font>r_lines={labelStart,0,0},
    <font color="blue">each </font>n_x={1,0,0},
    <font color="blue">each </font>n_y={0,1,0},
    <font color="blue">each </font>specularCoefficient=0);
  <font color="darkgreen"></font>
  <font color="darkgreen">// y-axis</font>
  <A HREF="MultiBody_Visualizers_Advanced.html#MultiBody.Visualizers.Advanced.Shape"
>MultiBody.Visualizers.Advanced.Shape</A> y_arrowLine[ndim](
    <font color="blue">each </font>shapeType=&quot;cylinder&quot;,
    <font color="blue">each </font>length=lineLength,
    <font color="blue">each </font>width=lineWidth,
    <font color="blue">each </font>height=lineWidth,
    <font color="blue">each </font>lengthDirection={0,1,0},
    <font color="blue">each </font>widthDirection={1,0,0},
    <font color="blue">each </font>color=axisColor_y,
    <font color="blue">each </font>specularCoefficient=0);
  <A HREF="MultiBody_Visualizers_Advanced.html#MultiBody.Visualizers.Advanced.Shape"
>MultiBody.Visualizers.Advanced.Shape</A> y_arrowHead[ndim](
    <font color="blue">each </font>shapeType=&quot;cone&quot;,
    <font color="blue">each </font>length=headLength,
    <font color="blue">each </font>width=headWidth,
    <font color="blue">each </font>height=headWidth,
    <font color="blue">each </font>lengthDirection={0,1,0},
    <font color="blue">each </font>widthDirection={1,0,0},
    <font color="blue">each </font>color=axisColor_y,
    <font color="blue">each </font>r={0,lineLength,0},
    <font color="blue">each </font>specularCoefficient=0);
  <A HREF="MultiBody_Visualizers_Internal.html#MultiBody.Visualizers.Internal.Lines"
>MultiBody.Visualizers.Internal.Lines</A> y_label[ndim2](
    <font color="blue">each </font>lines=scaledLabel*{[0, 0; 1, 1.5],[0, 1.5; 0.5, 0.75]},
    <font color="blue">each </font>diameter=axisDiameter,
    <font color="blue">each </font>color=axisColor_y,
    <font color="blue">each </font>r_lines={0,labelStart,0},
    <font color="blue">each </font>n_x={0,1,0},
    <font color="blue">each </font>n_y={-1,0,0},
    <font color="blue">each </font>specularCoefficient=0);
  <font color="darkgreen"></font>
  <font color="darkgreen">// z-axis</font>
  <A HREF="MultiBody_Visualizers_Advanced.html#MultiBody.Visualizers.Advanced.Shape"
>MultiBody.Visualizers.Advanced.Shape</A> z_arrowLine[ndim](
    <font color="blue">each </font>shapeType=&quot;cylinder&quot;,
    <font color="blue">each </font>length=lineLength,
    <font color="blue">each </font>width=lineWidth,
    <font color="blue">each </font>height=lineWidth,
    <font color="blue">each </font>lengthDirection={0,0,1},
    <font color="blue">each </font>widthDirection={0,1,0},
    <font color="blue">each </font>color=axisColor_z,
    <font color="blue">each </font>specularCoefficient=0);
  <A HREF="MultiBody_Visualizers_Advanced.html#MultiBody.Visualizers.Advanced.Shape"
>MultiBody.Visualizers.Advanced.Shape</A> z_arrowHead[ndim](
    <font color="blue">each </font>shapeType=&quot;cone&quot;,
    <font color="blue">each </font>length=headLength,
    <font color="blue">each </font>width=headWidth,
    <font color="blue">each </font>height=headWidth,
    <font color="blue">each </font>lengthDirection={0,0,1},
    <font color="blue">each </font>widthDirection={0,1,0},
    <font color="blue">each </font>color=axisColor_z,
    <font color="blue">each </font>r={0,0,lineLength},
    <font color="blue">each </font>specularCoefficient=0);
  <A HREF="MultiBody_Visualizers_Internal.html#MultiBody.Visualizers.Internal.Lines"
>MultiBody.Visualizers.Internal.Lines</A> z_label[ndim2](
    <font color="blue">each </font>lines=scaledLabel*{[0, 0; 1, 0],[0, 1; 1, 1],[0, 1; 1, 0]},
    <font color="blue">each </font>diameter=axisDiameter,
    <font color="blue">each </font>color=axisColor_z,
    <font color="blue">each </font>r_lines={0,0,labelStart},
    <font color="blue">each </font>n_x={0,0,1},
    <font color="blue">each </font>n_y={0,1,0},
    <font color="blue">each </font>specularCoefficient=0);
  <font color="darkgreen"></font>
  <font color="darkgreen">// Uniform gravity visualization</font>
  <font color="blue">parameter </font>Integer ndim_uniformGravity=<font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateGravity<font color="blue">
       and </font>gravityType == 1<font color="blue"> then </font>1<font color="blue"> else </font>0;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> gravityHeadLength=<font color="red">min</font>(gravityArrowLength, gravityArrowDiameter*
      Types.Defaults.ArrowHeadLengthFraction);
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> gravityHeadWidth=gravityArrowDiameter*Types.Defaults.
      ArrowHeadWidthFraction;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> gravityLineLength=<font color="red">max</font>(0, gravityArrowLength - gravityHeadLength);
  <A HREF="MultiBody_Visualizers_Advanced.html#MultiBody.Visualizers.Advanced.Shape"
>MultiBody.Visualizers.Advanced.Shape</A> gravityArrowLine[ndim_uniformGravity]
    (
    <font color="blue">each </font>shapeType=&quot;cylinder&quot;,
    <font color="blue">each </font>length=gravityLineLength,
    <font color="blue">each </font>width=gravityArrowDiameter,
    <font color="blue">each </font>height=gravityArrowDiameter,
    <font color="blue">each </font>lengthDirection=n,
    <font color="blue">each </font>widthDirection={0,1,0},
    <font color="blue">each </font>color=gravityArrowColor,
    <font color="blue">each </font>r_shape=gravityArrowTail,
    <font color="blue">each </font>specularCoefficient=0);
  <A HREF="MultiBody_Visualizers_Advanced.html#MultiBody.Visualizers.Advanced.Shape"
>MultiBody.Visualizers.Advanced.Shape</A> gravityArrowHead[ndim_uniformGravity]
    (
    <font color="blue">each </font>shapeType=&quot;cone&quot;,
    <font color="blue">each </font>length=gravityHeadLength,
    <font color="blue">each </font>width=gravityHeadWidth,
    <font color="blue">each </font>height=gravityHeadWidth,
    <font color="blue">each </font>lengthDirection=n,
    <font color="blue">each </font>widthDirection={0,1,0},
    <font color="blue">each </font>color=gravityArrowColor,
    <font color="blue">each </font>r_shape=gravityArrowTail + <font color="red">Frames.normalize</font>(n)*gravityLineLength,
    <font color="blue">each </font>specularCoefficient=0);
  <font color="darkgreen"></font>
  <font color="darkgreen">// Point gravity visualization</font>
  <font color="blue">parameter </font>Integer ndim_pointGravity=<font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateGravity<font color="blue">
       and </font>gravityType == 2<font color="blue"> then </font>1<font color="blue"> else </font>0;
  <A HREF="MultiBody_Visualizers_Advanced.html#MultiBody.Visualizers.Advanced.Shape"
>MultiBody.Visualizers.Advanced.Shape</A> gravitySphere[ndim_pointGravity](
    <font color="blue">each </font>shapeType=&quot;sphere&quot;,
    <font color="blue">each </font>r_shape={-gravitySphereDiameter/2,0,0},
    <font color="blue">each </font>lengthDirection={1,0,0},
    <font color="blue">each </font>length=gravitySphereDiameter,
    <font color="blue">each </font>width=gravitySphereDiameter,
    <font color="blue">each </font>height=gravitySphereDiameter,
    <font color="blue">each </font>color=gravitySphereColor,
    <font color="blue">each </font>specularCoefficient=0);
  <font color="darkgreen"></font>
  <font color="blue">function</font> gravityAcceleration = <A HREF="MultiBody.html#MultiBody.World.gravityAccelerationTypes"
>gravityAccelerationTypes</A> (
      gravityType=gravityType,
      g=g*<font color="red">MultiBody.Frames.normalize</font>(n),
      mue=mue);
  <font color="darkgreen"></font>
<font color="blue">protected </font>
  <font color="blue">function</font> gravityAccelerationTypes <font color="darkgreen">
    &quot;Gravity field acceleration depending on field type and position&quot;</font>

    <font color="darkgreen"></font>
    <font color="blue">extends </font><A HREF="../../Modelica/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
    <font color="blue">input </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> r[3] <font color="darkgreen">
      &quot;Position vector from world frame to actual point, resolved in world frame&quot;</font>;
    <font color="blue">input </font>Integer gravityType <font color="darkgreen">&quot;Type of gravity field&quot;</font>;
    <font color="blue">input </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> g[3] <font color="darkgreen">
      &quot;Constant gravity acceleration, resolved in world frame, if gravityType=1&quot;</font>;
    <font color="blue">input </font>Real mue(unit=&quot;m3/s2&quot;) <font color="darkgreen">
      &quot;Field constant of point gravity field, if gravityType=2&quot;</font>;
    <font color="blue">output </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> gravity[3] <font color="darkgreen">
      &quot;Gravity acceleration at point r, resolved in world frame&quot;</font>;
  <font color="blue">algorithm </font>
    gravity := <font color="blue">if </font>gravityType == 1<font color="blue"> then </font>g<font color="blue"> else </font><font color="blue">if </font>gravityType == 2<font color="blue"> then </font>-(mue/(
      r*r))*(r/<font color="red">Frames.length</font>(r))<font color="blue"> else </font><font color="red">zeros</font>(3);
  <font color="blue">end </font>gravityAccelerationTypes;
<font color="blue">equation </font>
  <font color="red">defineRoot</font>(frame_b.R);
  <font color="red">assert</font>(<font color="red">Frames.length</font>(n) &gt; 1.e-10,
    &quot;Parameter n of World object is wrong (lenght(n) &gt; 0 required)&quot;);
  frame_b.r_0 = <font color="red">zeros</font>(3);
  frame_b.R = <font color="red">Frames.nullRotation</font>();
<font color="blue">end </font>World;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE gravityAccelerationTypes<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="MultiBody.World.gravityAccelerationTypesI.png" ALT="MultiBody.World.gravityAccelerationTypes" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="MultiBody.World.gravityAccelerationTypes"></A><A HREF="MultiBody.html#MultiBody.World"
>MultiBody.World</A>.gravityAccelerationTypes</H2>
<B>Gravity field acceleration depending on field type and position</B><p>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> gravityAccelerationTypes <font color="darkgreen">
  &quot;Gravity field acceleration depending on field type and position&quot;</font>
  <font color="darkgreen"></font>
  <font color="blue">extends </font><A HREF="../../Modelica/help/Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">input </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> r[3] <font color="darkgreen">
    &quot;Position vector from world frame to actual point, resolved in world frame&quot;</font>;
  <font color="blue">input </font>Integer gravityType <font color="darkgreen">&quot;Type of gravity field&quot;</font>;
  <font color="blue">input </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> g[3] <font color="darkgreen">
    &quot;Constant gravity acceleration, resolved in world frame, if gravityType=1&quot;</font>;
  <font color="blue">input </font>Real mue(unit=&quot;m3/s2&quot;) <font color="darkgreen">
    &quot;Field constant of point gravity field, if gravityType=2&quot;</font>;
  <font color="blue">output </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> gravity[3] <font color="darkgreen">
    &quot;Gravity acceleration at point r, resolved in world frame&quot;</font>;
<font color="blue">algorithm </font>
  gravity := <font color="blue">if </font>gravityType == 1<font color="blue"> then </font>g<font color="blue"> else </font><font color="blue">if </font>gravityType == 2<font color="blue"> then </font>-(mue/(r*
    r))*(r/<font color="red">Frames.length</font>(r))<font color="blue"> else </font><font color="red">zeros</font>(3);
<font color="blue">end </font>gravityAccelerationTypes;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Thu Mar 04 09:44:28 2004
.
</address></BODY>
</HTML>
