<HTML>
<HEAD><META name="HTML-Generator" content="Dymola"><TITLE>MultiBody</TITLE></HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Sensors<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="MultiBody.Sensors"></A><A HREF="MultiBody.html#MultiBody"
>MultiBody</A>.Sensors</H2>
<B>Sensors to measure variables</B>
<P>
<A HREF="MultiBody_Sensors.html#MultiBody.Sensors.RelativeSensor"
><IMG SRC="MultiBody.Sensors.RelativeSensorI.png" ALT="MultiBody.Sensors.RelativeSensor" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Sensors.html#MultiBody.Sensors.Power"
><IMG SRC="MultiBody.Sensors.PowerI.png" ALT="MultiBody.Sensors.Power" WIDTH=80  HEIGHT=80 ></A>
<P><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="MultiBody_Sensors.html#MultiBody.Sensors.RelativeSensor"
>RelativeSensor</A>
</TD><TD>Measure relative quantities between two frames</TD></TR>
<TR><TD><A HREF="MultiBody_Sensors.html#MultiBody.Sensors.Power"
>Power</A>
</TD><TD>Measure power flowing from frame_a to frame_b</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE RelativeSensor<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="MultiBody.Sensors.RelativeSensorI.png" ALT="MultiBody.Sensors.RelativeSensor" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="MultiBody.Sensors.RelativeSensor"></A><A HREF="MultiBody_Sensors.html#MultiBody.Sensors"
>MultiBody.Sensors</A>.RelativeSensor</H2>
<B>Measure relative quantities between two frames</B><p>
<IMG SRC="MultiBody.Sensors.RelativeSensorD.png" ALT="MultiBody.Sensors.RelativeSensor">
<H3>Information</H3>
<PRE></pre>
<p>
Relative kinematic quantities between frame_a and frame_b are
computed and provided at the output signal connector <b>outPort</b>
in packed format in the order
</p>
<ol>
<li> relative position vector (= r_rel)</li>
<li> relative velocity vectory (= v_rel = <b>der</b>(r_rel))</li>
<li> relative acceleration vector (<b>der</b>(v_rel))</li>
<li> relative angular velocity vector (= w_rel)</li>
<li> relative angular acceleration vector (= <b>der</b>(w_rel))</li>
</ol>
<p>
For example, if parameters <b>get_v_rel</b> and <b>get_w_rel</b>
are <b>true</b> and all other get_XXX parameters are <b>false</b>, then
outPort.signal contains 6 elements:
</p>
<pre>
 outPort.signal[1:3] = relative velocity
 outPort.signal[4:6] = relative angular velocity
</pre>
<p>
If parameter <b>resolveInFrame_a</b> is <b>true</b>, then the
computed relative kinematic vectors are resolved in frame_a of this
component. Otherwise, the relative kinematic vectors are
resolved in frame_b. For example, if resolveInFrame_a = <b>false</b>, and
get_v_rel = <b>true</b>, then
<pre>
  outPort.signal = v_rel_b
                 = <b>der</b>(r_rel_b)
</pre>
is returned, i.e.,
the derivative of the relative distance r_rel_b from frame_a to frame_b,
resolved in frame_b.
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>animation</TD><TD>true</TD><TD>= true, if animation shall be enabled (show arrow)</TD></TR>
<TR><TD>resolveInFrame_a</TD><TD>true</TD><TD>= true, if vectors are resolved in frame_a, otherwise in frame_b</TD></TR>
<TR><TD>get_r_rel</TD><TD>true</TD><TD>= true, to measure position vector from origin of frame_a to origin of frame_b</TD></TR>
<TR><TD>get_v_rel</TD><TD>false</TD><TD>= true, to measure velocity of origin of frame_b with respect to origin of frame_a</TD></TR>
<TR><TD>get_a_rel</TD><TD>false</TD><TD>= true, to measure acceleration of origin of frame_b with respect to origin of frame_a</TD></TR>
<TR><TD>get_w_rel</TD><TD>false</TD><TD>= true, to measure angular velocity of frame_b with respect to frame_a</TD></TR>
<TR><TD>get_z_rel</TD><TD>false</TD><TD>= true, to measure angular acceleration of frame_b with respect to frame_a</TD></TR>
<TR><TD>arrowDiameter</TD><TD>world.defaultArrowDiameter</TD><TD> Diameter of arrow from frame_a to frame_b [m]</TD></TR>
<TR><TD>arrowColor</TD><TD>MultiBody.Types.Defaults.SensorColor</TD><TD> Color of arrow from frame_a to frame_b</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> RelativeSensor <font color="darkgreen">&quot;Measure relative quantities between two frames&quot;</font>

  <font color="darkgreen"></font>
  <font color="blue">import </font>SI = Modelica.SIunits;
  <font color="blue">extends </font><A HREF="MultiBody_Interfaces.html#MultiBody.Interfaces.PartialRelativeSensor"
>MultiBody.Interfaces.PartialRelativeSensor</A>(outPort(n=3*((<font color="blue">if </font>get_r_rel<font color="blue">
           then </font>1<font color="blue"> else </font>0) + (<font color="blue">if </font>get_v_rel<font color="blue"> then </font>1<font color="blue"> else </font>0) + (<font color="blue">if </font>get_a_rel<font color="blue"> then </font>1<font color="blue">
           else </font>0) + (<font color="blue">if </font>get_w_rel<font color="blue"> then </font>1<font color="blue"> else </font>0) + (<font color="blue">if </font>get_z_rel<font color="blue"> then </font>1<font color="blue"> else </font>0))));
  <font color="blue">parameter </font>Boolean animation=true <font color="darkgreen">
    &quot;= true, if animation shall be enabled (show arrow)&quot;</font>;
  <font color="blue">parameter </font>Boolean resolveInFrame_a=true <font color="darkgreen">
    &quot;= true, if vectors are resolved in frame_a, otherwise in frame_b&quot;</font>;
  <font color="blue">parameter </font>Boolean get_r_rel=true <font color="darkgreen">
    &quot;= true, to measure position vector from origin of frame_a to origin of frame_b&quot;</font>;
  <font color="blue">parameter </font>Boolean get_v_rel=false <font color="darkgreen">
    &quot;= true, to measure velocity of origin of frame_b with respect to origin of frame_a&quot;</font>;
  <font color="blue">parameter </font>Boolean get_a_rel=false <font color="darkgreen">
    &quot;= true, to measure acceleration of origin of frame_b with respect to origin of frame_a&quot;</font>;
  <font color="blue">parameter </font>Boolean get_w_rel=false <font color="darkgreen">
    &quot;= true, to measure angular velocity of frame_b with respect to frame_a&quot;</font>;
  <font color="blue">parameter </font>Boolean get_z_rel=false <font color="darkgreen">
    &quot;= true, to measure angular acceleration of frame_b with respect to frame_a&quot;</font>;
  <font color="blue">parameter </font>SI.Diameter arrowDiameter=world.defaultArrowDiameter <font color="darkgreen">
    &quot;|Animation|if animation = true| Diameter of arrow from frame_a to frame_b&quot;</font>;
  <font color="blue">parameter </font><A HREF="MultiBody_Types.html#MultiBody.Types.Color"
>MultiBody.Types.Color</A> arrowColor=MultiBody.Types.Defaults.SensorColor <font color="darkgreen">
    &quot;|Animation|if animation = true| Color of arrow from frame_a to frame_b&quot;</font>;
  <font color="darkgreen"></font>
  SI.Position r_rel[3] <font color="darkgreen">
    &quot;Position vector from origin of frame_a to origin of frame_b resolved according to resolveInFrame_a&quot;</font>;
  SI.Velocity v_rel[3] <font color="darkgreen">
    &quot;Velocity of origin of frame_b with respect to origin of frame_a resolved according to resolveInFrame_a&quot;</font>;
  SI.Acceleration a_rel[3] <font color="darkgreen">
    &quot;Acceleration of origin of frame_b with respect to origin of frame_a resolved according to resolveInFrame_a&quot;</font>;
  SI.AngularVelocity w_rel[3] <font color="darkgreen">
    &quot;Angular velocity of frame_b with respect to frame_a resolved according to resolveInFrame_a&quot;</font>;
  SI.AngularAcceleration z_rel[3] <font color="darkgreen">
    &quot;Angular acceleration of frame_b with respect to frame_a resolved according to resolveInFrame_a&quot;</font>;
  <A HREF="MultiBody_Frames.html#MultiBody.Frames.Orientation"
>MultiBody.Frames.Orientation</A> R_rel <font color="darkgreen">
    &quot;Relative orientation of frame_b with respect to frame_a&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">parameter </font>Integer i1=1;
  <font color="blue">parameter </font>Integer i2=<font color="blue">if </font>get_r_rel<font color="blue"> then </font>i1 + 3<font color="blue"> else </font>i1;
  <font color="blue">parameter </font>Integer i3=<font color="blue">if </font>get_v_rel<font color="blue"> then </font>i2 + 3<font color="blue"> else </font>i2;
  <font color="blue">parameter </font>Integer i4=<font color="blue">if </font>get_a_rel<font color="blue"> then </font>i3 + 3<font color="blue"> else </font>i3;
  <font color="blue">parameter </font>Integer i5=<font color="blue">if </font>get_w_rel<font color="blue"> then </font>i4 + 3<font color="blue"> else </font>i4;
  <font color="blue">parameter </font>Integer ndim=<font color="blue">if </font>world.enableAnimation<font color="blue"> and </font>animation<font color="blue"> then </font>1<font color="blue"> else </font>0;
  <A HREF="MultiBody_Visualizers_Advanced.html#MultiBody.Visualizers.Advanced.Arrow"
>MultiBody.Visualizers.Advanced.Arrow</A> arrow[ndim](
    <font color="blue">each </font>r=frame_a.r_0,
    <font color="blue">each </font>r_head=frame_b.r_0 - frame_a.r_0,
    <font color="blue">each </font>diameter=arrowDiameter,
    <font color="blue">each </font>color=arrowColor);
<font color="blue">equation </font>
  <font color="blue">if </font>get_r_rel<font color="blue"> or </font>get_v_rel<font color="blue"> or </font>get_a_rel<font color="blue"> then</font>
    <font color="blue">if </font>resolveInFrame_a<font color="blue"> then</font>
      r_rel = <font color="red">MultiBody.Frames.resolve2</font>(frame_a.R, frame_b.r_0 - frame_a.r_0);
    <font color="blue">else</font>
      r_rel = <font color="red">MultiBody.Frames.resolve2</font>(frame_b.R, frame_b.r_0 - frame_a.r_0);
    <font color="blue">end if</font>;
  <font color="blue">else</font>
    r_rel = <font color="red">zeros</font>(3);
  <font color="blue">end if</font>;
  <font color="darkgreen"></font>
  <font color="blue">if </font>get_v_rel<font color="blue"> or </font>get_a_rel<font color="blue"> then</font>
    v_rel = <font color="red">der</font>(r_rel);
  <font color="blue">else</font>
    v_rel = <font color="red">zeros</font>(3);
  <font color="blue">end if</font>;
  <font color="darkgreen"></font>
  <font color="blue">if </font>get_a_rel<font color="blue"> then</font>
    a_rel = <font color="red">der</font>(v_rel);
  <font color="blue">else</font>
    a_rel = <font color="red">zeros</font>(3);
  <font color="blue">end if</font>;
  <font color="darkgreen"></font>
  <font color="blue">if </font>get_w_rel<font color="blue"> or </font>get_z_rel<font color="blue"> then</font>
    <font color="blue">if </font>resolveInFrame_a<font color="blue"> then</font>
      R_rel = <font color="red">MultiBody.Frames.relativeRotation</font>(frame_b.R, frame_a.R);
      w_rel = -<font color="red">MultiBody.Frames.angularVelocity2</font>(R_rel, <font color="red">der</font>(R_rel));
    <font color="blue">else</font>
      R_rel = <font color="red">MultiBody.Frames.relativeRotation</font>(frame_a.R, frame_b.R);
      w_rel = <font color="red">MultiBody.Frames.angularVelocity2</font>(R_rel, <font color="red">der</font>(R_rel));
    <font color="blue">end if</font>;
  <font color="blue">else</font>
    R_rel = <font color="red">MultiBody.Frames.nullRotation</font>();
    w_rel = <font color="red">zeros</font>(3);
  <font color="blue">end if</font>;
  <font color="darkgreen"></font>
  <font color="blue">if </font>get_z_rel<font color="blue"> then</font>
    z_rel = <font color="red">der</font>(w_rel);
  <font color="blue">else</font>
    z_rel = <font color="red">zeros</font>(3);
  <font color="blue">end if</font>;
  <font color="darkgreen"></font>
  frame_a.f = <font color="red">zeros</font>(3);
  frame_a.t = <font color="red">zeros</font>(3);
  frame_b.f = <font color="red">zeros</font>(3);
  frame_b.t = <font color="red">zeros</font>(3);
  <font color="darkgreen"></font>
  <font color="blue">if </font>get_r_rel<font color="blue"> then</font>
    outPort.signal[i1:i1 + 2] = r_rel;
  <font color="blue">end if</font>;
  <font color="darkgreen"></font>
  <font color="blue">if </font>get_v_rel<font color="blue"> then</font>
    outPort.signal[i2:i2 + 2] = v_rel;
  <font color="blue">end if</font>;
  <font color="darkgreen"></font>
  <font color="blue">if </font>get_a_rel<font color="blue"> then</font>
    outPort.signal[i3:i3 + 2] = a_rel;
  <font color="blue">end if</font>;
  <font color="darkgreen"></font>
  <font color="blue">if </font>get_w_rel<font color="blue"> then</font>
    outPort.signal[i4:i4 + 2] = w_rel;
  <font color="blue">end if</font>;
  <font color="darkgreen"></font>
  <font color="blue">if </font>get_z_rel<font color="blue"> then</font>
    outPort.signal[i5:i5 + 2] = z_rel;
  <font color="blue">end if</font>;
<font color="blue">end </font>RelativeSensor;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Power<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="MultiBody.Sensors.PowerI.png" ALT="MultiBody.Sensors.Power" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="MultiBody.Sensors.Power"></A><A HREF="MultiBody_Sensors.html#MultiBody.Sensors"
>MultiBody.Sensors</A>.Power</H2>
<B>Measure power flowing from frame_a to frame_b</B><p>
<IMG SRC="MultiBody.Sensors.PowerD.png" ALT="MultiBody.Sensors.Power">
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Power <font color="darkgreen">&quot;Measure power flowing from frame_a to frame_b&quot;</font>
  <font color="blue">import </font>SI = Modelica.SIunits;
  <font color="blue">extends </font>Modelica.Icons.RotationalSensor;
  Modelica.Blocks.Interfaces.OutPort outPort(<font color="blue">final </font>n=1, <font color="blue">redeclare </font><font color="blue">type</font>
      SignalType = SI.Power);
  <font color="darkgreen"></font>
  <A HREF="MultiBody_Interfaces.html#MultiBody.Interfaces.Frame_a"
>Interfaces.Frame_a</A> frame_a;
  <A HREF="MultiBody_Interfaces.html#MultiBody.Interfaces.Frame_b"
>Interfaces.Frame_b</A> frame_b;
<font color="blue">equation </font>
  frame_a.r_0 = frame_b.r_0;
  frame_a.R = frame_b.R;
  <font color="red">zeros</font>(3) = frame_a.f + frame_b.f;
  <font color="red">zeros</font>(3) = frame_a.t + frame_b.t;
  outPort.signal[1] = frame_a.f*<font color="red">Frames.resolve2</font>(frame_a.R, <font color="red">der</font>(frame_a.r_0)) +
    frame_a.t*<font color="red">Frames.angularVelocity2</font>(frame_a.R, <font color="red">der</font>(frame_a.R));
<font color="blue">end </font>Power;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Wed Oct 29 09:12:14 2003
.
</address></BODY>
</HTML>
