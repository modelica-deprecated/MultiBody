<HTML>
<HEAD><META name="HTML-Generator" content="Dymola"><TITLE>Tutorial</TITLE></HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Tutorial<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="MultiBody.Tutorial"></A><A HREF="MultiBody.html#MultiBody"
>MultiBody</A>.Tutorial</H2>
<B>Tutorial</B>
<P>
<A HREF="MultiBody_Tutorial.html#MultiBody.Tutorial.OverView"
><IMG SRC="MultiBody.Tutorial.OverViewI.png" ALT="MultiBody.Tutorial.OverView" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Tutorial.html#MultiBody.Tutorial.FirstExample"
><IMG SRC="MultiBody.Tutorial.FirstExampleI.png" ALT="MultiBody.Tutorial.FirstExample" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Tutorial_LoopStructures.html#MultiBody.Tutorial.LoopStructures"
><IMG SRC="MultiBody.Tutorial.LoopStructuresI.png" ALT="MultiBody.Tutorial.LoopStructures" WIDTH=80  HEIGHT=80 ></A>
<A HREF="MultiBody_Tutorial.html#MultiBody.Tutorial.ReleaseNotes"
><IMG SRC="MultiBody.Tutorial.ReleaseNotesI.png" ALT="MultiBody.Tutorial.ReleaseNotes" WIDTH=80  HEIGHT=80 ></A>
<P><P>
<H3>Information</H3>
<PRE></pre>
<h3><font color="#008000" size=5>Tutorial of package MultiBody</font></h3>
<p>
Library <b>MultiBody</b> is a <b>free</b> Modelica package providing
3-dimensional mechanical components to model in a convenient way
<b>mechanical systems</b>, such as robots, mechanisms, vehicles.
This package contains a tutorial of the MultiBody library.
</p>
<pre></PRE><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="MultiBody_Tutorial.html#MultiBody.Tutorial.OverView"
>OverView</A>
</TD><TD>Overview of MultiBody library</TD></TR>
<TR><TD><A HREF="MultiBody_Tutorial.html#MultiBody.Tutorial.FirstExample"
>FirstExample</A>
</TD><TD>A first example</TD></TR>
<TR><TD><A HREF="MultiBody_Tutorial_LoopStructures.html#MultiBody.Tutorial.LoopStructures"
>LoopStructures</A>
</TD><TD>Loop structures</TD></TR>
<TR><TD><A HREF="MultiBody_Tutorial.html#MultiBody.Tutorial.ReleaseNotes"
>ReleaseNotes</A>
</TD><TD>Release notes</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE OverView<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="MultiBody.Tutorial.OverViewI.png" ALT="MultiBody.Tutorial.OverView" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="MultiBody.Tutorial.OverView"></A><A HREF="MultiBody_Tutorial.html#MultiBody.Tutorial"
>MultiBody.Tutorial</A>.OverView</H2>
<B>Overview of MultiBody library</B><p>
<H3>Information</H3>
<PRE></pre>
<h3><font color="#008000">Overview of MultiBody Library</font></h3>
<p>
Library <b>MultiBody</b> is a <b>free</b> Modelica package providing
3-dimensional mechanical components to model in a convenient way
<b>mechanical systems</b>, such as robots, mechanisms, vehicles.
A basic feature is that all components have <b>animation</b> information
with appropriate default sizes and colors. A typical screenshot of the
animation of a double pendulum is shown in the figure below, together
with its schematic.
</p>
<IMG SRC="../Images/Examples/Elementary/DoublePendulumSmall.png"> &nbsp;&nbsp;
<IMG SRC="../Images/Tutorial/DoublePendulumDiagramSmall.png"
  ALT="double pendulum (diagram layer)">
<p>
Note, that all components - the coordinate system of the world frame,
the gravity acceleration vector, the revolute joints and the
bodies - are visualized in the animation.<br>
This library replaces the long available ModelicaAdditions.MultiBody
library, since it is much more easier to use and more powerful.
The main features of the library are:
</p>
<ul>
<li>About <b>40 main components</b>, i.e., joint, force, part,
    body, sensor and visualizer components that are ready to use
    and have useful default animation properties. One-dimensional
    force laws can be defined with components of the Modelica.Mechanics.Rotational
    and of the Modelica.Mechanics.Translational library and can be
    connected via available flange connectors to MultiBody
    components.
<li> <b>A World model</b> has to be present in every model on top
     level. Here the gravity field is defined (currently: no gravity,
     uniform gravity, point gravity), the visualization of the
     world coordinate system and default settings for animation.
     If a world model is not present, it is automatically provided
     together with a warning message.
<li><b>Built-in animation properties</b> of all components, such as
    joints, forces, bodies, sensors. This allows an easy visual
    check of the constructed model. Animation of every component
    can be switched off via a parameter. The animation of a complete
    system can be switched off via one parameter in the <b>world</b>
    model. If animation is switched off, all equations related
    to animation are removed from the generated code. This is especially
    important for real-time simulation.</li>
<li><b>Automatic handling of kinematic loops</b>.
    Components can be connected together in a nearly arbitrary fashion.
    It does not matter whether components are flipped. This does not
    influence the efficiency. If kinematic loop structures occur,
    this is automatically handeled in an efficient way by a new
    technique to transform a certain class of overdetermined sets of
    differential algebraic equations symbolically to a system where
    the number of equations and unknowns are the same (the user need
    <b>not</b> cut loops with special cut-joints to construct a
    tree-structure). </li>
<li><b>Automatic state selection from joints and bodies</b>.
    Most joints and all bodies have potential states. A Modelica
    translator, such as Dymola, will use the generalized coordinates
    of joints as states if possible. If this is not possible,
    states are selected from body coordinates. As a consequence,
    strange joints with 6 degrees of freedom are not necessary
    to define a body moving freely in space. An advanced user
    may select states manually from the <b>Advanced</b> menu of the
    corresponding components or use a Modelica parameter modification
    to set the "stateSelect" attribute directly. </li>
<li> <b>Analytic solution of kinematic loops</b>. The non-linear
    equations occuring in kinematic loops are solved <b>analytically</b>
    for a large class of mechanisms, such as a 4 bar mechanism,
    a slider-crank mechanism or a MacPherson suspension. This is performed
    by constructing such loops with assembly joints JointXXX,
    available in the MultiBody.Joints package. Assembly joints consist
    of 3 joints that have together 6 degrees of freedom, i.e., no
    constraints.They do not have potential states. When the motion
    of the two frame connectors are provided, a non-linear system of
    equation is solved analytically to compute the motion of the 3 joints.
    Analytic loop handling is especially important for real-time simulation.</li>
<li> <b>Line force components may have mass</b>.
     Masses of line force components are located on the line on which
     the force is acting. They approximate the mass properties of
     a real physical device by one or two point masses. For example,
     a spring has often significant mass that has to be taken into
     account. If masses are set to zero, the additional code to handle
     these point masses is removed. If the masses are taken into
     account, the calculation overhead is small (the reason is that
     the occuring kinematic loops are analytically solved).<br>
     Note, in this Beta-release, not all provided line force
     components have already an optional mass. This will be fixed
     in the next release.</li>
<li> <b>Force components may be connected directly together</b>, e.g.,
     3-dimensional springs in series connection. Usually,
     multi-body programs have the restriction that force components
     can only be connected between two bodies. Such restrictions are
     not present in the Modelica multi-body library, since it is
     a fully object-oriented, equation based library. Usually, if
     force components are connected directly together, non-linear
     systems of equations occur. The advantage is often, that this
     may avoid stiff systems that would occur if a small mass has
     to be put in between the two force elements.</li>
<li><b>Initialization definition is available via menus</b>.
    Initialization of states in joints and bodies can be
    performed in the parameter menu, <b>without</b> typing Modelica
    statements. For non-standard initialization, the usual
    Modelica commands can be used.</li>
<li><b>Multi-body specific error messages</b>. Annotations
    and assert statements have been introduced that provide
    in many cases warning or error messages that are related
    to the library components (and not to specific equations
    as it is usual in Modelica libraries). This requires
    appropriate tool support, as it is, e.g., available in Dymola.</li>
<li><b>Inverse models</b> of mechanical systems can be easily
    defined by using motion generators, e.g.,
    Modelica.Mechanics.Rotational.Position. Also, non-standard
    inverse models can be generated, e.g., when elasticity is present
    it might be necessary to differentiate equations several times.</li>
<li>About <b>45 functions</b> to operate in a convenient way on
    orientation objects, e.g., to transform vector quantities between
    frames, or compute the orientation object of a planar rotation.
    The basic idea is to hide the actual definition of an <b>orientation</b>
    by providing essentially an <b>Orientation</b> type together with
    <b>functions</b> operating on instances of this type. Orientation
    objects based on a 3x3 transformation matrix and on quaternions
    are provided. As a side effect, the equations in all other
    components are simpler and easier to understand.</li>
</ul>
<pre>
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE FirstExample<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="MultiBody.Tutorial.FirstExampleI.png" ALT="MultiBody.Tutorial.FirstExample" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="MultiBody.Tutorial.FirstExample"></A><A HREF="MultiBody_Tutorial.html#MultiBody.Tutorial"
>MultiBody.Tutorial</A>.FirstExample</H2>
<B>A first example</B><p>
<H3>Information</H3>
<PRE></pre>
<h3><font color="#008000">A first example</font></h3>
<p>
As a first example it shall be demonstrated how to build up, simulate
and animate a <b>simple pendulum</b>.
</p>
<p>
A simple pendulum consisting of a <b>body</b> and a <b>revolute</b> joint
with <b>linear damping</b> in the joint, is first build-up as
Modelica composition diagram, resulting in:
</p>
<p align="center">
<IMG SRC="../Images/Tutorial/FirstExample/PenulumSchematic1.png"
ALT="Modelica composition diagram of simple pendulum">
</p>
<p>
In the following figure the location of the used
model components is shown. Drag these components in the diagram layer
and connect them according to the figure:
</p>
<p align="center">
<IMG SRC="../Images/Tutorial/FirstExample/PenulumSchematic2.png">
</p>
<p>
Every model that uses model components from the MultiBody library
must have an instance of the MultiBody.World model on highest level.
The reason is that in the world object the gravity field is defined
(uniform gravity or point gravity), as well as the default sizes of
animation shapes and this information is reported to all used
components. If the World object is missing, a warning message is
printed and an instance of the World object with default settings is
automatically utilized (this feature is defined with annotations and
is, e.g., supported by Dymola).
</p>
<p>
In a second step the parameters of the dragged components need to be
defined. Some parameters are vectors that have to be defined with respect
to a local coordinate system of the corresponding component. The easiest
way to perform this is to define a <b>reference configuration</b> of your
multi-body model: In this configuration, the relative coordinates of
all joints are zero. This means that all coordinate systems on all
components are parallel to each other. Therefore, this just means
that all vectors are resolved in the world frame in this configuration.
</p>
<p>
The reference configuration for the simple pendulum shall be defined
in the following way: The y-axis of the world frame is directed
upwards, i.e., the opposite direction of the gravity acceleration.
The x-axis of the world frame is orthogonal to it. The revolute joint
is placed in the origin of the world frame. The rotation axis of the revolute
joint is directed along the z-axis of the world frame. The body is
placed on the x-axis of the world frame (i.e., the rotation angle of the
revolute joint is zero, when the body is on the x-axis).
In the following figures the definition of this reference configuration
is shown in the parameter menus of the revolute joint and the body:
</p>
<p align="center">
<IMG SRC="../Images/Tutorial/FirstExample/ActuatedRevolute.png">
</p>
<p align="center">
<IMG SRC="../Images/Tutorial/FirstExample/Body.png">
</p>
<p>
Translate and simulate the model, e.g., with Dymola.
Automatically, all defined components are visualized in
an animation using default absolute or relative sizes
of the components. For example, a body is visualized as
a sphere and as a cylinder. The default size of the sphere is defined
as parameter in the world object. You may change this size
in the "Animation" parameter menu of the body (see parameter menu
above). The default size of the cylinder is defined relatively
to the size of the sphere (half of the sphere size).
With default settings, the following animation is defined:
</p>
<p align="center">
<IMG SRC="../Images/Tutorial/FirstExample/Pendulum.png">
</p>
<p>
The world coordinate system is visualized as coordinate system
with axes labels. The direction of the gravity acceleration
vector is shown as green arrow. The red cylinder represents
the rotation axis of the revolute joint and the light blue
shapes represent the body. The center of mass of the body is
in the middle of the light blue sphere.
</p>
<pre>
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ReleaseNotes<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="MultiBody.Tutorial.ReleaseNotesI.png" ALT="MultiBody.Tutorial.ReleaseNotes" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="MultiBody.Tutorial.ReleaseNotes"></A><A HREF="MultiBody_Tutorial.html#MultiBody.Tutorial"
>MultiBody.Tutorial</A>.ReleaseNotes</H2>
<B>Release notes</B><p>
<H3>Information</H3>
<PRE></pre>
<h3><font color="#008000" size=5>Release notes</font></h3>
<h3><font color="#008000">Version 0.98, 2003-10-27</font></h3>
<p>
This version is <b>not backward</b> compatible to the previous
MultiBody versions, since the initialization has changed.
Parameter "startValuesFixed" is no longer present and is
replaced by parameter "initType" (see below). Models generated with
previous MultiBody versions are automatically converted to the new
release.
</p>

<ul>
<li> <b>Tutorial</b> improved.</li>
<li> New model "MultiBody.Joints.Assemblies.<b>JointSSP</b>"<br>
     Spherical - spherical - prismatic joint aggregation with mass
     (no constraints, no potential states) for analytic loop handling.</li>
<li> New model "MultiBody.Forces.<b>LineForceWithTwoMasses</b>"<br>
     General line force component with two optional point masses on
     the connection line.</li>
<li> New model "MultiBody.Forces.<b>Force</b>"<br>
     Force acting between two frames, defined by 3 input signals
     and resolved in frame_b or in frame_resolve.</li>
<li> New model "MultiBody.Forces.<b>Torque</b>" <br>
     Torque acting between two frames, defined by 3 input signals
     and resolved in frame_b or in frame_resolve</li>
<li> New model "MultiBody.Forces.<b>ForceAndTorque</b>" <br>
     Force and torque acting between two frames, defined by
     6 input signals and resolved in frame_b or in frame_resolve.</li>
<li> New model "MultiBody.<b>Examples.ForceAndTorque</b>" <br>
     Demonstrate usage of ForceAndTorque element.</li>
<li> New model "MultiBody.<b>Examples.LineForceWithTwoMasses</b>"<br>
     Demonstrate line force with two point masses using a
     JointUPS and alternatively a LineForceWithTwoMasses component.</li>
<li> New model "MultiBody.<b>Examples.InitSpringConstant</b>"<br>
     Determine spring constant such that system is in steady
     state at given position.</li>
<li> Removed model "MultiBody.Examples.ForceWithMass"<br>
     This demo is included in the new LineForceWithTwoMasses
     example.</li>
<li> Change in "MultiBody.Parts.<b>Body</b>"<br>
     The default of parameter "useQuaternions" in the
     "Advanced" menu is changed from false to true.
     This means that by default quaternions are used as
     body states.</li>
<li> Change in all models that have potential states:<br>
     <b>New initialization</b> introduced replacing the previous
     "startValuesFixed" parameter. The new parameter "initType"
     can have the following values:
<pre>
 initType = MultiBody.Types.Init
  .Free                        : no initialization
                                 (= same as previous startValuesFixed = <b>false</b>)
  .PositionVelocity            : initialize generalized position and velocity variables
                                 (= same as previous startValuesFixed = <b>true</b>)
  .SteadyState                 : initialize in steady state
                                 (velocity and acceleration are zero)
  .Position                    : initialize only generalized position variable(s)
  .Velocity                    : initialize only generalized velocity variable(s)
  .VelocityAcceleration        : initialize generalized velocity and
                                 acceleration variables
  .PositionVelocityAcceleration: initialize generalized position, velocity
                                 and acceleration variables
</pre>
</li>
</ul>
<h3><font color="#008000">Version 0.97, 2003-09-10</font></h3>
<p>
Bug fixed in model "MultiBody.Parts.Body": There was an
error when switching
from one set of Cardan angles to another one when the actual
Cardan angles are close to their singularity.
This has been corrected.
</p>
<h3><font color="#008000">Version 0.96, 2003-08-04</font></h3>
<p>
This was the first version delivered with Dymola.
</p>
<pre>
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Wed Oct 29 09:15:16 2003
.
</address></BODY>
</HTML>
